@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="tr">
<head>
    <title>Admin Panel - DTS</title>
    <meta charset="utf-8" />
    <meta name="description" content="DTS Admin Dashboard" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:locale" content="tr_TR" />
    <meta property="og:type" content="article" />
    <meta name="access-token" content="@(User.FindFirst("AccessToken")?.Value ?? "")" />
    <link rel="shortcut icon" href="~/assets/media/logos/favicon.ico" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700" />
    <link href="~/assets/plugins/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="~/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    @await RenderSectionAsync("Styles", required: false)
    <style>

        :root {
            --theme-primary: #E31E24;
            --theme-primary-active: #C41A1F;
            --theme-primary-light: #FFE2E3;
            --theme-primary-hover: #D11D22;
            --theme-dark: #1D1D1D;
            --theme-dark-light: #252525;
        }


        #kt_app_sidebar {
            background-color: var(--theme-dark);
            border-right: 1px solid #2F2F2F;
        }

        .app-sidebar-logo {
            border-bottom: 1px solid #2F2F2F;
        }


        .menu-item .menu-link {
            color: #9D9DA6 !important;
            border-bottom: none !important;
            box-shadow: none !important;
        }

            .menu-item .menu-link:hover {
                background-color: transparent !important;
                color: #9D9DA6 !important;
                border-bottom: none !important;
                box-shadow: none !important;
            }

            .menu-item.here > .menu-link,
            .menu-item.show > .menu-link,
            .menu-item .menu-link.active {
                background-color: transparent !important;
                color: #ffffff !important;
                border-left: 3px solid var(--theme-primary) !important;
                border-bottom: none !important;
                box-shadow: none !important;
            }

                .menu-item.here > .menu-link .menu-icon i,
                .menu-item.show > .menu-link .menu-icon i,
                .menu-item .menu-link.active .menu-icon i {
                    color: var(--theme-primary) !important;
                }


        .menu-item .menu-icon i {
            color: #9D9DA6 !important;
        }

        .menu-item .menu-link:hover .menu-icon i {
            color: #ffffff !important;
        }

        .btn-primary {
            background-color: var(--theme-primary) !important;
            border-color: var(--theme-primary) !important;
        }

            .btn-primary:hover {
                background-color: var(--theme-primary-hover) !important;
                border-color: var(--theme-primary-hover) !important;
            }

            .btn-primary:active, .btn-primary:focus {
                background-color: var(--theme-primary-active) !important;
                border-color: var(--theme-primary-active) !important;
            }


        .text-primary {
            color: var(--theme-primary) !important;
        }

        .border-primary {
            border-color: var(--theme-primary) !important;
        }

        .bg-primary {
            background-color: var(--theme-primary) !important;
        }

        .bg-light-primary {
            background-color: var(--theme-primary-light) !important;
        }


        .menu-link, .menu-link:hover, .menu-link:focus, .menu-link:active,
        .menu-title, .menu-title:hover, .menu-title:focus, .menu-title:active,
        .menu-item a, .menu-item a:hover, .menu-item a:focus, .menu-item a:active {
            text-decoration: none !important;
            border-bottom: none !important;
            box-shadow: none !important;
        }


        .menu.menu-gray-600 .menu-item .menu-link {
            text-decoration: none !important;
            border-bottom: none !important;
            box-shadow: none !important;
        }
    </style>

</head>

<body id="kt_app_body" data-kt-app-layout="dark-sidebar" data-kt-app-header-fixed="true" data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="true" data-kt-app-sidebar-hoverable="false" data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true" data-kt-app-sidebar-push-footer="true" data-kt-app-toolbar-enabled="true" class="app-default" data-bs-theme="light">
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
        <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
            <div id="kt_app_header" class="app-header">
                <div class="app-container container-fluid d-flex align-items-stretch justify-content-between" id="kt_app_header_container">
                    <div class="d-flex align-items-center d-lg-none ms-n3 me-1 me-md-2" title="Show sidebar menu">
                        <div class="btn btn-icon btn-active-color-primary w-35px h-35px" id="kt_app_sidebar_mobile_toggle">
                            <i class="ki-duotone ki-abstract-14 fs-2 fs-md-1">
                                <span class="path1"></span>
                                <span class="path2"></span>
                            </i>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-grow-1 flex-lg-grow-0">
                        <a href="/Admin" class="d-lg-none">
                            <img alt="Logo" src="~/assets/media/logos/default-small.svg" class="h-30px" />
                        </a>
                    </div>
                    <div class="d-flex align-items-stretch justify-content-between flex-lg-grow-1" id="kt_app_header_wrapper">
                        <div data-kt-swapper="true" data-kt-swapper-mode="{default: 'prepend', lg: 'prepend'}" data-kt-swapper-parent="{default: '#kt_app_content_container', lg: '#kt_app_header_wrapper'}" class="page-title d-flex flex-column justify-content-center flex-wrap me-3 mb-5 mb-lg-0">
                            <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                                <li class="breadcrumb-item text-muted">
                                    <a href="/Admin" class="text-muted text-hover-primary">Ana Sayfa</a>
                                </li>
                                <li class="breadcrumb-item">
                                    <span class="bullet bg-gray-400 w-5px h-2px"></span>
                                </li>
                                <li class="breadcrumb-item text-muted">@ViewData["Title"]</li>
                            </ul>
                        </div>
                        <div class="app-navbar flex-shrink-0">
                            <div class="app-navbar-item ms-1 ms-md-3" id="kt_header_user_menu_toggle">
                                <div class="cursor-pointer symbol symbol-30px symbol-md-40px" data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
                                    <img src="~/assets/media/avatars/blank.png" alt="user" />
                                </div>
                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-275px" data-kt-menu="true">
                                    <div class="menu-item px-5">
                                        <a href="/Admin/Profile" class="menu-link px-5">Profilim</a>
                                    </div>
                                    <div class="menu-item px-5">
                                        <a href="/Admin/User/ChangePassword" class="menu-link px-5">
                                            <i class="fas fa-key me-2"></i>Şifre Değiştir
                                        </a>
                                    </div>
                                    <div class="menu-item px-5">
                                        <form asp-area="Admin" asp-controller="AdminLogout" asp-action="Logout" method="post" asp-antiforgery="true" style="display:inline;">
                                            <button type="submit" class="menu-link px-5 border-0 bg-transparent text-start w-100">Çıkış Yap</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
                <div id="kt_app_sidebar" class="app-sidebar flex-column" data-kt-drawer="true" data-kt-drawer-name="app-sidebar" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="225px" data-kt-drawer-direction="start" data-kt-drawer-toggle="#kt_app_sidebar_mobile_toggle">
                    <div class="app-sidebar-menu overflow-hidden flex-column-fluid">
                        <div id="kt_app_sidebar_menu_wrapper" class="app-sidebar-wrapper hover-scroll-overlay-y mt-0" data-kt-scroll="true" data-kt-scroll-activate="true" data-kt-scroll-height="auto" data-kt-scroll-wrappers="#kt_app_sidebar_menu" data-kt-scroll-offset="0px" data-kt-scroll-save-state="true">
                            <div class="menu menu-column menu-rounded px-3 pt-2" id="#kt_app_sidebar_menu" data-kt-menu="true" data-kt-menu-expand="false">
                                <div class="menu-item">
                                    <div class="menu-content">
                                        <span class="menu-heading fw-bold text-uppercase fs-7">Sistem Yönetimi</span>
                                    </div>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/Admin/User/Index">
                                        <span class="menu-icon">
                                            <i class="fas fa-users fs-2"></i>
                                        </span>
                                        <span class="menu-title">Kullanıcılar</span>
                                    </a>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/Admin/Role/Index">
                                        <span class="menu-icon">
                                            <i class="fas fa-user-tag fs-2"></i>
                                        </span>
                                        <span class="menu-title">Roller</span>
                                    </a>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/Admin/Authorization/Index">
                                        <span class="menu-icon">
                                            <i class="fas fa-user-lock fs-2"></i>
                                        </span>
                                        <span class="menu-title">Yetkilendirme</span>
                                    </a>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/Admin/Authorization/PermissionRoles">
                                        <span class="menu-icon">
                                            <i class="fas fa-key fs-2"></i>
                                        </span>
                                        <span class="menu-title">Role-İzin Tanımlama</span>
                                    </a>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/Admin/LoginLog/Index">
                                        <span class="menu-icon">
                                            <i class="fas fa-sign-in-alt fs-2"></i>
                                        </span>
                                        <span class="menu-title">Giriş Logları</span>
                                    </a>
                                </div>

                                <div class="separator my-5"></div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/Observation/Index">
                                        <span class="menu-icon">
                                            <i class="fas fa-arrow-circle-left fs-2"></i>
                                        </span>
                                        <span class="menu-title">Ana Sayfaya Dön</span>
                                    </a>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/">
                                        <span class="menu-icon">
                                            <i class="fas fa-sign-in-alt fs-2"></i>
                                        </span>
                                        <span class="menu-title">Giriş Sayfasına Dön</span>
                                    </a>
                                </div>

                                <div class="menu-item">
                                    <a class="menu-link" href="/adminpanel/login">
                                        <span class="menu-icon">
                                            <i class="fas fa-user-shield fs-2"></i>
                                        </span>
                                        <span class="menu-title">Admin Giriş Sayfasına Dön</span>
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                    <div class="d-flex flex-column flex-column-fluid">
                        <div id="kt_app_content" class="app-content flex-column-fluid">
                            <div id="kt_app_content_container" class="app-container container-fluid">
                                @RenderBody()
                            </div>
                        </div>
                    </div>
                    <div id="kt_app_footer" class="app-footer">
                        <div class="app-container container-fluid d-flex flex-column flex-md-row flex-center flex-md-stack py-3">
                            <div class="text-dark order-2 order-md-1">
                                <span class="text-muted fw-semibold me-1">@DateTime.Now.Year &copy;</span>
                                <a href="https://example.com" target="_blank" class="text-gray-800 text-hover-primary">DTS Admin Panel</a>
                            </div>
                            <ul class="menu menu-gray-600 menu-hover-primary fw-semibold order-1">
                                <li class="menu-item">
                                    <a href="#" target="_blank" class="menu-link px-2">Destek</a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" target="_blank" class="menu-link px-2">Yardım</a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" target="_blank" class="menu-link px-2">Hakkında</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
        <i class="ki-duotone ki-arrow-up">
            <span class="path1"></span>
            <span class="path2"></span>
        </i>
    </div>

    <script>var hostUrl = "~/assets/";</script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="~/js/apiconfig.js"></script>
    <script src="~/assets/plugins/global/plugins.bundle.js"></script>
    <script src="~/assets/js/scripts.bundle.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/continentsLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/usaLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/worldTimeZonesLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/worldTimeZoneAreasLow.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.7/signalr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/assets/plugins/custom/fullcalendar/fullcalendar.bundle.js"></script>
    <script src="~/assets/plugins/custom/datatables/datatables.bundle.js"></script>
    <script src="~/assets/js/widgets.bundle.js"></script>
    <script src="~/assets/js/custom/widgets.js"></script>
    <script src="~/assets/js/custom/apps/chat/chat.js"></script>
    <script src="~/assets/js/custom/utilities/modals/upgrade-plan.js"></script>
    <script src="~/assets/js/custom/utilities/modals/create-app.js"></script>
    <script src="~/assets/js/custom/utilities/modals/new-target.js"></script>
    <script src="~/assets/js/custom/utilities/modals/users-search.js"></script>

    <script>
        $(document).ready(function() {
            $.ajaxSetup({
                beforeSend: function(xhr) {
                    const token = '@(User.FindFirst("AccessToken")?.Value ?? "")';
                    if (token) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + token);
                    }
                }
            });
        });
    </script>
    <!-- Global fetch override -->
    <script>
        (function() {
            const originalFetch = window.fetch;
            const token = document.querySelector('meta[name="access-token"]')?.content;

            window.fetch = function(url, options = {}) {
                if (token) {
                    options.headers = {
                        ...options.headers,
                        'Authorization': `Bearer ${token}`
                    };
                }
                return originalFetch(url, options);
            };
        })();
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>